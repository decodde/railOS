<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <script src='https://api.mapbox.com/mapbox-gl-js/v1.4.1/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v1.4.1/mapbox-gl.css' rel='stylesheet' />
  </head>
  <div id='map' style='width: 400px; height: 300px;'></div>
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoicmFpbG9zIiwiYSI6ImNqeXU2cnhzMTBheTYzY21kenpxZ2txeTYifQ.HnjkbV1GL8IGXn36xDZb9Q';
        var map = new mapboxgl.Map({
          container: 'map',
          style: 'mapbox://styles/mapbox/streets-v11',
          center: [-74.50, 40], // starting position
          zoom: 9,
          options:{
            maxZoom:20,
            minZoom:15
          }
        });
        map.addControl(new mapboxgl.NavigationControl());
    </script>
    <script defer src="./public/js/jquery.min.js" type="text/javascript"></script>
    
   
    <script type="text/javascript">
        var latitudeStart=10.8493206820
        var longitudeStart=79.42402545278

        loopr=()=>{
            setInterval(() => {
              var newCoordinates=fetchNewCoordinates(longitudeStart,latitudeStart)
               longitudeStart=newCoordinates.long
               latitudeStart=newCoordinates.lat
              console.log(`newLong:${longitudeStart},,,newLat:${latitudeStart}`)
            }, 5000);
        }
        fetchNewCoordinates=(oldLong,oldLat)=>{
          console.log(`oldLong:${oldLong},,,oldLat:${oldLat}`)
          var t= $.ajax({
                    url:`http://localhost/longitude/${oldLong}/latitude/${oldLat}/thresh/0.0000340034/0.0000345830`,
                    data:{},
                    async:false,
                    method:"GET"
                  })  
          return t.responseJSON
        }
       // loopr()
    </script>

  </body>
</html>